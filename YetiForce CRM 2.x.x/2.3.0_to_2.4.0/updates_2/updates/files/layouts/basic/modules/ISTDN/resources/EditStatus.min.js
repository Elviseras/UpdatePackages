
jQuery.Class("ISTDN_EditStatus_Js",{},{formElement:false,moduleName:"ISTDN",registerChangeStatus:function(){var a=this;jQuery("#modalEditStatus .changeStatus").on("click",function(c){var b=jQuery(c.currentTarget);b.closest(".modal").addClass("hide");a.updateStatus(b)})},updateStatus:function(c){var a=this;var d={record:c.data("id"),state:c.data("state")};app.hideModalWindow();var b=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});app.saveAjax("updateStatus",d,{module:this.moduleName}).then(function(f){if(f.success){var g=app.getViewName();if(g==="Detail"){if(app.getModuleName()==a.moduleName){window.location.reload()}else{Vtiger_Detail_Js.reloadRelatedList();b.progressIndicator({mode:"hide"})}}if(g=="List"){var e=new Vtiger_List_Js();e.getListViewRecords()}}else{return false}})},registerHelpInfo:function(){var a=this.getForm();var b=app.showPopoverElementView(a.find(".helpInfoPopover"),{trigger:"click",html:true});b.trigger("click").trigger("click");b.on("shown.bs.popover",function(g,d){var c=jQuery(g.currentTarget);var f=c.next();app.showScrollBar(f.find(".popover-content"),{height:"300px",railVisible:true,})})},getForm:function(){if(this.formElement==false){this.setForm(jQuery("#modalEditStatus"))}return this.formElement},setForm:function(a){this.formElement=a;return this},registerEvents:function(){this.registerChangeStatus();this.registerHelpInfo();this.getForm().find(".convert").each(function(){var a=jQuery(this).text();jQuery(this).text(a)})}});jQuery(document).ready(function(b){var a=new ISTDN_EditStatus_Js();a.registerEvents()});